CREATE TABLE users (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  username VARCHAR2(255) NOT NULL UNIQUE,
  password VARCHAR2(255) NOT NULL,
  email VARCHAR2(255) NOT NULL UNIQUE,
  name VARCHAR2(255)  NOT NULL
);

CREATE TABLE social_users (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  username VARCHAR2(255) NOT NULL UNIQUE,
  provider VARCHAR2(50), -- 소셜 로그인 제공자 이름 (Google, Naver, Kakao 등)
  provider_id VARCHAR2(50), -- 해당 제공자에서의 고유 식별자
  email VARCHAR2(255) NOT NULL UNIQUE,
  name VARCHAR2(255)  NOT NULL
);


CREATE TABLE roles (
  id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR2(50) NOT NULL UNIQUE
);

CREATE TABLE user_role (
  user_id NUMBER NOT NULL,
  role_id NUMBER NOT NULL,
  PRIMARY KEY (user_id, role_id),
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (role_id) REFERENCES roles(id)
);

CREATE TABLE social_user_role (
  social_user_id NUMBER NOT NULL,
  role_id NUMBER NOT NULL,
  PRIMARY KEY (social_user_id, role_id),
  FOREIGN KEY (social_user_id) REFERENCES social_users(id),
  FOREIGN KEY (role_id) REFERENCES roles(id)
);
